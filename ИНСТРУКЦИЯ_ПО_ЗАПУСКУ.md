# Инструкция по запуску проекта Mesto

## Предварительные требования

1. **Java 11 или выше**
   - Проверить версию: `java -version`
   - Если не установлена, скачать с [Oracle](https://www.oracle.com/java/technologies/downloads/) или [OpenJDK](https://openjdk.org/)

2. **Maven 3.6+**
   - Проверить версию: `mvn -version`
   - Если не установлена, скачать с [Apache Maven](https://maven.apache.org/download.cgi)

3. **Node.js и npm** (для фронтенда)
   - Проверить версию: `node -v` и `npm -v`
   - Если не установлены, скачать с [Node.js](https://nodejs.org/)

## Шаг 1: Запуск Java-сервера

1. Откройте терминал и перейдите в директорию сервера:
```bash
cd server
```

2. Соберите проект Maven:
```bash
mvn clean package
```

3. Запустите сервер:
```bash
java -jar target/mesto-server-1.0-SNAPSHOT.jar
```

**Или запустите напрямую без сборки jar:**
```bash
mvn exec:java -Dexec.mainClass="ru.mesto.server.Server"
```

4. Вы должны увидеть сообщение:
```
Server started on http://localhost:3000
=== Admin Console ===
...
```

Сервер будет работать на порту **3000** (можно изменить в `server/src/main/resources/config.properties`).

## Шаг 2: Запуск фронтенда

1. Откройте **новый терминал** (не закрывая сервер) и перейдите в корневую директорию проекта:
```bash
cd /Users/admin/Desktop/desktop-/dev/mesto-project-ff
```

2. Установите зависимости (если еще не установлены):
```bash
npm install
```

3. Запустите dev-сервер:
```bash
npm run dev
```

4. Откройте браузер и перейдите по адресу, который покажет webpack (обычно `http://localhost:8080`)

## Проверка работы

1. **Сервер должен быть запущен** на `http://localhost:3000`
2. **Фронтенд должен быть запущен** на `http://localhost:8080` (или другой порт, указанный webpack)
3. В браузере откройте приложение - оно должно подключиться к локальному серверу

## Администрирование сервера

В терминале, где запущен сервер, доступна консоль администрирования:

- `stats` - показать статистику (количество пользователей, карточек, лайков)
- `users` - список всех пользователей
- `cards` - список всех карточек
- `help` - показать справку
- `exit` - остановить сервер

## Структура базы данных

База данных H2 создается автоматически в директории `server/data/` при первом запуске.

## Логи

Логи сервера сохраняются в `server/logs/server.log`

## Возможные проблемы

### Порт 3000 занят
Измените порт в файле `server/src/main/resources/config.properties`:
```
server.port=3001
```

И обновите `baseUrl` в `src/scripts/index.js`:
```javascript
baseUrl: 'http://localhost:3001'
```

### Ошибки компиляции Java
Убедитесь, что используется Java 11 или выше:
```bash
java -version
```

### Ошибки Maven
Попробуйте очистить и пересобрать:
```bash
cd server
mvn clean
mvn package
```

## Остановка

1. Для остановки сервера: в консоли сервера введите `exit` или нажмите `Ctrl+C`
2. Для остановки фронтенда: в консоли фронтенда нажмите `Ctrl+C`

